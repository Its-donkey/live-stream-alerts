{
	"info": {
		"_postman_id": "f1c6149b-4ad3-4259-b3fd-38265f7effb1",
		"name": "live-stream-alerts API",
		"description": "Collection generated from internal/api/v1/router.go covering every public HTTP endpoint.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Server",
			"item": [
				{
					"name": "GET /api/server/config",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverBase}}/api/server/config",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"server",
								"config"
							]
						},
						"description": "Returns runtime metadata (service name, bind address, port, read timeout) plus the relative path to the streamers JSON file (for example `data/streamers.json`)."
					},
					"response": []
				},
				{
					"name": "GET /",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverBase}}/",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								""
							]
						},
						"description": "Placeholder response proving the API-only stance (\"UI assets not configured\")."
					},
					"response": []
				}
			]
		},
		{
			"name": "Streamers",
			"item": [
				{
					"name": "GET /api/streamers",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverBase}}/api/streamers",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"streamers"
							]
						},
						"description": "Returns the JSON array of all persisted streamer records."
					},
					"response": []
				},
				{
					"name": "GET /api/streamers/watch",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Accept",
								"value": "text/event-stream"
							}
						],
						"url": {
							"raw": "{{serverBase}}/api/streamers/watch",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"streamers",
								"watch"
							]
						},
						"description": "Server-Sent Events endpoint that emits a `ready` event followed by `change` events whenever `data/streamers.json` is modified. Use this to trigger UI reloads when streamer records are updated."
					},
					"response": []
				},
				{
					"name": "POST /api/streamers",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"streamer\": {\n    \"alias\": \"SharpenDev\",\n    \"description\": \"Sharpening livestreams and tutorials.\",\n    \"languages\": [\"English\"]\n  },\n  \"platforms\": {\n    \"url\": \"https://www.youtube.com/@SharpenDev\"\n  }\n}"
						},
						"url": {
							"raw": "{{serverBase}}/api/streamers",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"streamers"
							]
						},
						"description": "Persists a streamer profile to data/streamers.json, derives the ID from the alias, and auto resolves the YouTube handle/channel from the provided URL."
					},
					"response": []
				},
				{
					"name": "DELETE /api/streamers",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"streamer\": {\n    \"id\": \"SharpenDev\"\n  }\n}"
						},
						"url": {
							"raw": "{{serverBase}}/api/streamers",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"streamers"
							]
						},
						"description": "Deletes the streamer whose `id` is provided in the body. The shared handler serves GET/POST/PATCH/DELETE on the same base path and advertises them via the `Allow` header."
					},
					"response": []
				},
				{
					"name": "PATCH /api/streamers/:id",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"streamer\": {\n    \"id\": \"SharpenDev\",\n    \"alias\": \"Sharpen Dev\",\n    \"description\": \"Weekly sharpening livestreams and Q&A.\",\n    \"languages\": [\"English\", \"Japanese\"]\n  }\n}"
						},
						"url": {
							"raw": "{{serverBase}}/api/streamers",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"streamers"
							]
						},
						"description": "Partially updates an existing streamer record. Provide the ID plus any combination of alias/description/languages."
					},
					"response": []
				}
			]
		},
		{
			"name": "YouTube",
			"item": [
				{
					"name": "POST /api/youtube/subscribe",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"topic\": \"https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample\",\n  \"verify\": \"async\",\n  \"leaseSeconds\": 864000,\n  \"secret\": \"demo-secret\"\n}"
						},
						"url": {
							"raw": "{{serverBase}}/api/youtube/subscribe",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"youtube",
								"subscribe"
							]
						},
						"description": "Forwards a JSON payload to YouTube's PubSubHubbub hub while the server enforces callback/mode defaults."
					},
					"response": []
				},
				{
					"name": "POST /api/youtube/unsubscribe",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"topic\": \"https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample\"\n}"
						},
						"url": {
							"raw": "{{serverBase}}/api/youtube/unsubscribe",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"youtube",
								"unsubscribe"
							]
						},
						"description": "Issues an unsubscribe call to YouTube's PubSubHubbub hub so the configured callback stops receiving alerts."
					},
					"response": []
				},
				{
					"name": "GET /alerts (Hub verification)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverBase}}/alerts?hub.mode=subscribe&hub.topic=https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample&hub.challenge=demo-challenge&hub.verify_token=demo-token&hub.lease_seconds=864000",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"alerts"
							],
							"query": [
								{
									"key": "hub.mode",
									"value": "subscribe"
								},
								{
									"key": "hub.topic",
									"value": "https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample"
								},
								{
									"key": "hub.challenge",
									"value": "demo-challenge"
								},
								{
									"key": "hub.verify_token",
									"value": "demo-token"
								},
								{
									"key": "hub.lease_seconds",
									"value": "864000"
								}
							]
						},
						"description": "Simulates the GET callback that YouTube's hub issues to verify subscriptions. The server must echo the provided `hub.challenge`."
					},
					"response": []
				},
				{
					"name": "GET /alert (Hub verification alias)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{serverBase}}/alert?hub.mode=subscribe&hub.topic=https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample&hub.challenge=demo-challenge&hub.verify_token=demo-token&hub.lease_seconds=864000",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"alert"
							],
							"query": [
								{
									"key": "hub.mode",
									"value": "subscribe"
								},
								{
									"key": "hub.topic",
									"value": "https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample"
								},
								{
									"key": "hub.challenge",
									"value": "demo-challenge"
								},
								{
									"key": "hub.verify_token",
									"value": "demo-token"
								},
								{
									"key": "hub.lease_seconds",
									"value": "864000"
								}
							]
						},
						"description": "Identical to `/alerts` but verifies the legacy singular callback path that older reverse proxies might still hit."
					},
					"response": []
				},
				{
					"name": "POST /api/youtube/channel",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"handle\": \"@SharpenDev\"\n}"
						},
						"url": {
							"raw": "{{serverBase}}/api/youtube/channel",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"youtube",
								"channel"
							]
						},
						"description": "Converts a YouTube @handle into its canonical UC... channel ID."
					},
					"response": []
				},
				{
					"name": "POST /api/youtube/metadata",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"url\": \"https://www.youtube.com/@SharpenDev\"\n}"
						},
						"url": {
							"raw": "{{serverBase}}/api/youtube/metadata",
							"host": [
								"{{serverBase}}"
							],
							"path": [
								"api",
								"youtube",
								"metadata"
							]
						},
						"description": "Scrapes description/title/handle/channelId metadata from the provided URL."
					},
					"response": []
				}
			],
			"description": "Handlers that proxy YouTube WebSub subscription and Channel lookup calls."
		}
	],
	"variable": [
		{
			"key": "serverBase",
			"value": "http://127.0.0.1:8880"
		}
	]
}
