{
  "info": {
    "_postman_id": "c310c209-eccc-4344-b2b7-241dba87746b",
    "name": "live-stream-alerts API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Collection generated from internal/api/v1/router.go covering every public HTTP endpoint."
  },
  "item": [
    {
      "name": "YouTube",
      "description": "Handlers that proxy YouTube WebSub subscription and Channel lookup calls.",
      "item": [
        {
          "name": "POST /api/youtube/subscribe",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"topic\": \"https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample\",\n  \"verify\": \"async\",\n  \"leaseSeconds\": 864000,\n  \"secret\": \"demo-secret\"\n}"
            },
            "url": {
              "raw": "{{serverBase}}/api/youtube/subscribe",
              "host": [ "{{serverBase}}" ],
              "path": [ "api", "youtube", "subscribe" ]
            },
            "description": "Forwards a JSON payload to YouTube's PubSubHubbub hub while the server enforces callback/mode defaults."
          }
        },
        {
          "name": "GET /alerts (Hub verification)",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{serverBase}}/alerts?hub.mode=subscribe&hub.topic=https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample&hub.challenge=demo-challenge&hub.verify_token=demo-token&hub.lease_seconds=864000",
              "host": [ "{{serverBase}}" ],
              "path": [ "alerts" ],
              "query": [
                { "key": "hub.mode", "value": "subscribe" },
                { "key": "hub.topic", "value": "https://www.youtube.com/xml/feeds/videos.xml?channel_id=UCexample" },
                { "key": "hub.challenge", "value": "demo-challenge" },
                { "key": "hub.verify_token", "value": "demo-token" },
                { "key": "hub.lease_seconds", "value": "864000" }
              ]
            },
            "description": "Simulates the GET callback that YouTube's hub issues to verify subscriptions. The server must echo the provided `hub.challenge`."
          }
        },
        {
          "name": "POST /api/youtube/channel",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"handle\": \"@SharpenDev\"\n}"
            },
            "url": {
              "raw": "{{serverBase}}/api/youtube/channel",
              "host": [ "{{serverBase}}" ],
              "path": [ "api", "youtube", "channel" ]
            },
            "description": "Converts a YouTube @handle into its canonical UC... channel ID."
          }
        }
      ]
    },
    {
      "name": "Streamers",
      "item": [
        {
          "name": "GET /api/streamers",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{serverBase}}/api/streamers",
              "host": [ "{{serverBase}}" ],
              "path": [ "api", "streamers" ]
            },
            "description": "Returns the JSON array of all persisted streamer records."
          }
        },
        {
          "name": "POST /api/streamers",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"streamer\": {\n    \"alias\": \"SharpenDev\",\n    \"description\": \"Sharpening livestreams and tutorials.\",\n    \"languages\": [\"English\"]\n  },\n  \"platforms\": {\n    \"url\": \"https://www.youtube.com/@SharpenDev\"\n  }\n}"
            },
            "url": {
              "raw": "{{serverBase}}/api/streamers",
              "host": [ "{{serverBase}}" ],
              "path": [ "api", "streamers" ]
            },
            "description": "Persists a streamer profile to data/streamers.json, derives the ID from the alias, and auto resolves the YouTube handle/channel from the provided URL."
          }
        },
        {
          "name": "DELETE /api/streamers/:id",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"streamer\": {\n    \"id\": \"SharpenDev\",\n    \"createdAt\": \"2025-03-01T15:04:05Z\"\n  }\n}"
            },
            "url": {
              "raw": "{{serverBase}}/api/streamers/SharpenDev",
              "host": [ "{{serverBase}}" ],
              "path": [ "api", "streamers", "SharpenDev" ]
            },
            "description": "Deletes the streamer whose `id` matches the path segment and whose `createdAt` matches the stored record. The same `/api/streamers` handler serves GET/POST/DELETE, so this endpoint now advertises `Allow: GET, POST, DELETE` to callers."
          }
        }
      ]
    },
    {
      "name": "Metadata",
      "item": [
        {
          "name": "POST /api/metadata/description",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"url\": \"https://www.youtube.com/@SharpenDev\"\n}"
            },
            "url": {
              "raw": "{{serverBase}}/api/metadata/description",
              "host": [ "{{serverBase}}" ],
              "path": [ "api", "metadata", "description" ]
            },
            "description": "Scrapes description/title/handle/channelId metadata from the provided URL."
          }
        }
      ]
    },
    {
      "name": "Server",
      "item": [
        {
          "name": "GET /api/server/config",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{serverBase}}/api/server/config",
              "host": [ "{{serverBase}}" ],
              "path": [ "api", "server", "config" ]
            },
            "description": "Returns runtime metadata (service name, bind address, port, read timeout)."
          }
        },
        {
          "name": "GET /",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{serverBase}}/",
              "host": [ "{{serverBase}}" ],
              "path": [ "" ]
            },
            "description": "Placeholder response proving the API-only stance (\"UI assets not configured\")."
          }
        }
      ]
    }
  ],
  "variable": [
    { "key": "serverBase", "value": "http://127.0.0.1:8880" }
  ]
}
